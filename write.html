<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Write</title><style>body{width:720px;max-width:92%;margin:20px auto;background:#eee;text-align:center}textarea{display:block;width:calc(100% - 12px);height:calc(50vh - 60px);resize:none;margin:8px 0;padding:4px;border:1px solid gray;border-radius:4px;font:16px sans-serif}output{display:block;color:green;font-size:1.5em}</style></head><body><output>0</output><textarea id="txt" placeholder="Исходный текст" onkeyup="encode()"></textarea><textarea id="enc" placeholder="TXT-запись DNS"></textarea><script>const A="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",to_b58=e=>{let t,n,r,o,a=[],i="";for(t in e)for(n=0,r=e[t],i+=r||i.length^t?"":1;n in a||r;)o=a[n],o=o?256*o+r:r,r=o/58|0,a[n]=o%58,n++;for(;n--;)i+=A[a[n]];return i},from_b58=e=>{let t,n,r,o,a=[],i=[];for(t in e){if(n=0,r=A.indexOf(e[t]),r<0)return;for(r||i.length^t||i.push(0);n in a||r;)o=a[n],o=o?58*o+r:r,r=o>>8,a[n]=o%256,n++}for(;n--;)i.push(a[n]);return new Uint8Array(i)},a1=" ОЕАНИТС",a2="ЛВРКДМУПЯЬЫЪГБЧЗЖЙФХЦШЩЭЮ1256789",d=new Date,dt=d.getMonth().toString(16)+d.getDate().toString().padStart(2,"0");encode=(async()=>{let e=document.querySelector("#txt").value;const t="Ё034",n="ЕОЗЧ",r=new RegExp(`[^${a1+a2+t+n}]`,"g");e=e.trim().toUpperCase().replace(r,"").split("").map(e=>-1==(i=t.indexOf(e))?e:n[i]).map(e=>-1!=(i=a2.indexOf(e))?(32+i).toString(2):a1.indexOf(e).toString(2).padStart(4,"0")),e="1"+e.join(""),e=(new Array(9-e.length%8).join("0")+e).match(/.{8}/g).map(e=>parseInt(e,2));let o='"'+dt+to_b58(new Uint8Array(e))+'"';document.querySelector("#enc").value=o,document.querySelector("output").innerHTML=o.length,document.querySelector("output").style.color=o.length<255?"green":"red"});</script></body></html>
